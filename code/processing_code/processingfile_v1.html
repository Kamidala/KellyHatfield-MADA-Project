<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kelly Hatfield">
<meta name="dcterms.date" content="2023-02-23">

<title>Cleaning Script</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="processingfile_v1_files/libs/clipboard/clipboard.min.js"></script>
<script src="processingfile_v1_files/libs/quarto-html/quarto.js"></script>
<script src="processingfile_v1_files/libs/quarto-html/popper.min.js"></script>
<script src="processingfile_v1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="processingfile_v1_files/libs/quarto-html/anchor.min.js"></script>
<link href="processingfile_v1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="processingfile_v1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="processingfile_v1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="processingfile_v1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="processingfile_v1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning Script</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kelly Hatfield </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 23, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="processing-script" class="level1">
<h1>Processing script</h1>
<p>This code contains script to load and process/clean the data.</p>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<p>Load needed packages. make sure they are installed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co">#for data processing/cleaning</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr) <span class="co">#for data processing/cleaning</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr) <span class="co">#for nice visualization of data </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here) <span class="co">#to set paths</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /Users/kellymccormickhatfield/Documents/MADA 2023/KellyHatfield-MADA-Project</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (tidyverse) <span class="co">#for data processing/cleaning</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages
───────────────────────────────────────
tidyverse 1.3.2 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ ggplot2 3.4.0     ✔ purrr   1.0.0
✔ tibble  3.1.8     ✔ stringr 1.5.0
✔ readr   2.1.3     ✔ forcats 0.5.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-loading" class="level1">
<h1>Data loading</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># path to data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note the use of the here() package and not absolute paths</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>provider_location <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw_data"</span>,<span class="st">"NH_ProviderInfo_Jan2023.csv"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>raw_provider <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(provider_location)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>quality_location <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw_data"</span>,<span class="st">"CMS Nursing Home HAI039.csv"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>raw_quality <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(quality_location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 15107 Columns: 20
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(11): cms_certification_number_ccn, facility_name, address_line_1, city,... dbl
(8): zip_code, cms_region, HAI_039_Observed, HAI_039_Obs_Rate, HAI_039_... lgl
(1): measure_date_range
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `HAI_039_RS_Rate_2_5` -&gt; `HAI_039_RS_Rate_2_5...18`
• `HAI_039_RS_Rate_2_5` -&gt; `HAI_039_RS_Rate_2_5...19`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(raw_quality)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(raw_quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "address_line_1"               "city"                        
 [3] "cms_certification_number_ccn" "cms_region"                  
 [5] "COMP_PERF"                    "county_name"                 
 [7] "end_date"                     "facility_name"               
 [9] "HAI_039_Denominator"          "HAI_039_Obs_Rate"            
[11] "HAI_039_Observed"             "HAI_039_RS_Rate"             
[13] "HAI_039_RS_Rate_2_5...18"     "HAI_039_RS_Rate_2_5...19"    
[15] "location1"                    "measure_date_range"          
[17] "phone_number"                 "start_date"                  
[19] "state"                        "zip_code"                    </code></pre>
</div>
</div>
</section>
<section id="check-data" class="level1">
<h1>Check data</h1>
<p>Several ways of looking at the data. Lets start wtih a glimpse of the provider data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(raw_provider)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 15,107
Columns: 95
$ Federal.Provider.Number                                               &lt;chr&gt; …
$ Provider.Name                                                         &lt;chr&gt; …
$ Provider.Address                                                      &lt;chr&gt; …
$ Provider.City                                                         &lt;chr&gt; …
$ Provider.State                                                        &lt;chr&gt; …
$ Provider.Zip.Code                                                     &lt;int&gt; …
$ Provider.Phone.Number                                                 &lt;dbl&gt; …
$ Provider.SSA.County.Code                                              &lt;int&gt; …
$ Provider.County.Name                                                  &lt;chr&gt; …
$ Ownership.Type                                                        &lt;chr&gt; …
$ Number.of.Certified.Beds                                              &lt;int&gt; …
$ Average.Number.of.Residents.per.Day                                   &lt;dbl&gt; …
$ Average.Number.of.Residents.per.Day.Footnote                          &lt;int&gt; …
$ Provider.Type                                                         &lt;chr&gt; …
$ Provider.Resides.in.Hospital                                          &lt;chr&gt; …
$ Legal.Business.Name                                                   &lt;chr&gt; …
$ Date.First.Approved.to.Provide.Medicare.and.Medicaid.Services         &lt;chr&gt; …
$ Continuing.Care.Retirement.Community                                  &lt;chr&gt; …
$ Special.Focus.Status                                                  &lt;chr&gt; …
$ Abuse.Icon                                                            &lt;chr&gt; …
$ Most.Recent.Health.Inspection.More.Than.2.Years.Ago                   &lt;chr&gt; …
$ Provider.Changed.Ownership.in.Last.12.Months                          &lt;chr&gt; …
$ With.a.Resident.and.Family.Council                                    &lt;chr&gt; …
$ Automatic.Sprinkler.Systems.in.All.Required.Areas                     &lt;chr&gt; …
$ Overall.Rating                                                        &lt;int&gt; …
$ Overall.Rating.Footnote                                               &lt;int&gt; …
$ Health.Inspection.Rating                                              &lt;int&gt; …
$ Health.Inspection.Rating.Footnote                                     &lt;int&gt; …
$ QM.Rating                                                             &lt;int&gt; …
$ QM.Rating.Footnote                                                    &lt;int&gt; …
$ Long.Stay.QM.Rating                                                   &lt;int&gt; …
$ Long.Stay.QM.Rating.Footnote                                          &lt;int&gt; …
$ Short.Stay.QM.Rating                                                  &lt;int&gt; …
$ Short.Stay.QM.Rating.Footnote                                         &lt;int&gt; …
$ Staffing.Rating                                                       &lt;int&gt; …
$ Staffing.Rating.Footnote                                              &lt;int&gt; …
$ Reported.Staffing.Footnote                                            &lt;int&gt; …
$ Physical.Therapist.Staffing.Footnote                                  &lt;int&gt; …
$ Reported.Nurse.Aide.Staffing.Hours.per.Resident.per.Day               &lt;dbl&gt; …
$ Reported.LPN.Staffing.Hours.per.Resident.per.Day                      &lt;dbl&gt; …
$ Reported.RN.Staffing.Hours.per.Resident.per.Day                       &lt;dbl&gt; …
$ Reported.Licensed.Staffing.Hours.per.Resident.per.Day                 &lt;dbl&gt; …
$ Reported.Total.Nurse.Staffing.Hours.per.Resident.per.Day              &lt;dbl&gt; …
$ Total.number.of.nurse.staff.hours.per.resident.per.day.on.the.weekend &lt;dbl&gt; …
$ Registered.Nurse.hours.per.resident.per.day.on.the.weekend            &lt;dbl&gt; …
$ Reported.Physical.Therapist.Staffing.Hours.per.Resident.Per.Day       &lt;dbl&gt; …
$ Total.nursing.staff.turnover                                          &lt;dbl&gt; …
$ Total.nursing.staff.turnover.footnote                                 &lt;int&gt; …
$ Registered.Nurse.turnover                                             &lt;dbl&gt; …
$ Registered.Nurse.turnover.footnote                                    &lt;int&gt; …
$ Number.of.administrators.who.have.left.the.nursing.home               &lt;int&gt; …
$ Administrator.turnover.footnote                                       &lt;int&gt; …
$ Case.Mix.Nurse.Aide.Staffing.Hours.per.Resident.per.Day               &lt;dbl&gt; …
$ Case.Mix.LPN.Staffing.Hours.per.Resident.per.Day                      &lt;dbl&gt; …
$ Case.Mix.RN.Staffing.Hours.per.Resident.per.Day                       &lt;dbl&gt; …
$ Case.Mix.Total.Nurse.Staffing.Hours.per.Resident.per.Day              &lt;dbl&gt; …
$ Adjusted.Nurse.Aide.Staffing.Hours.per.Resident.per.Day               &lt;dbl&gt; …
$ Adjusted.LPN.Staffing.Hours.per.Resident.per.Day                      &lt;dbl&gt; …
$ Adjusted.RN.Staffing.Hours.per.Resident.per.Day                       &lt;dbl&gt; …
$ Adjusted.Total.Nurse.Staffing.Hours.per.Resident.per.Day              &lt;dbl&gt; …
$ Adjusted.Weekend.Total.Nurse.Staffing.Hours.per.Resident.per.Day      &lt;dbl&gt; …
$ Rating.Cycle.1.Standard.Survey.Health.Date                            &lt;chr&gt; …
$ Rating.Cycle.1.Total.Number.of.Health.Deficiencies                    &lt;chr&gt; …
$ Rating.Cycle.1.Number.of.Standard.Health.Deficiencies                 &lt;chr&gt; …
$ Rating.Cycle.1.Number.of.Complaint.Health.Deficiencies                &lt;chr&gt; …
$ Rating.Cycle.1.Health.Deficiency.Score                                &lt;chr&gt; …
$ Rating.Cycle.1.Number.of.Health.Revisits                              &lt;chr&gt; …
$ Rating.Cycle.1.Health.Revisit.Score                                   &lt;chr&gt; …
$ Rating.Cycle.1.Total.Health.Score                                     &lt;chr&gt; …
$ Rating.Cycle.2.Standard.Health.Survey.Date                            &lt;chr&gt; …
$ Rating.Cycle.2.Total.Number.of.Health.Deficiencies                    &lt;chr&gt; …
$ Rating.Cycle.2.Number.of.Standard.Health.Deficiencies                 &lt;chr&gt; …
$ Rating.Cycle.2.Number.of.Complaint.Health.Deficiencies                &lt;chr&gt; …
$ Rating.Cycle.2.Health.Deficiency.Score                                &lt;chr&gt; …
$ Rating.Cycle.2.Number.of.Health.Revisits                              &lt;chr&gt; …
$ Rating.Cycle.2.Health.Revisit.Score                                   &lt;chr&gt; …
$ Rating.Cycle.2.Total.Health.Score                                     &lt;chr&gt; …
$ Rating.Cycle.3.Standard.Health.Survey.Date                            &lt;chr&gt; …
$ Rating.Cycle.3.Total.Number.of.Health.Deficiencies                    &lt;chr&gt; …
$ Rating.Cycle.3.Number.of.Standard.Health.Deficiencies                 &lt;chr&gt; …
$ Rating.Cycle.3.Number.of.Complaint.Health.Deficiencies                &lt;chr&gt; …
$ Rating.Cycle.3.Health.Deficiency.Score                                &lt;chr&gt; …
$ Rating.Cycle.3.Number.of.Health.Revisits                              &lt;chr&gt; …
$ Rating.Cycle.3.Health.Revisit.Score                                   &lt;chr&gt; …
$ Rating.Cycle.3.Total.Health.Score                                     &lt;chr&gt; …
$ Total.Weighted.Health.Survey.Score                                    &lt;dbl&gt; …
$ Number.of.Facility.Reported.Incidents                                 &lt;int&gt; …
$ Number.of.Substantiated.Complaints                                    &lt;int&gt; …
$ Number.of.Citations.from.Infection.Control.Inspections                &lt;int&gt; …
$ Number.of.Fines                                                       &lt;int&gt; …
$ Total.Amount.of.Fines.in.Dollars                                      &lt;dbl&gt; …
$ Number.of.Payment.Denials                                             &lt;int&gt; …
$ Total.Number.of.Penalties                                             &lt;int&gt; …
$ Location                                                              &lt;chr&gt; …
$ Processing.Date                                                       &lt;chr&gt; …</code></pre>
</div>
</div>
</section>
<section id="cleaning" class="level1">
<h1>Cleaning</h1>
<p>There are a lot of variables and observations in this dataset. We want to subset to just the variables of interest, first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>raw_provider1 <span class="ot">&lt;-</span> raw_provider[<span class="fu">c</span>(<span class="st">"Federal.Provider.Number"</span>, <span class="st">"Average.Number.of.Residents.per.Day"</span>,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Adjusted.Total.Nurse.Staffing.Hours.per.Resident.per.Day"</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Staffing.Rating"</span>, <span class="st">"Provider.State"</span>,   <span class="st">"Ownership.Type"</span>)]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(raw_provider1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">raw_provider1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">15107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 29%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Federal.Provider.Number</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15107</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Provider.State</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ownership.Type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 44%">
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Average.Number.of.Residents.per.Day</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">78.61</td>
<td style="text-align: right;">47.49</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">47.10</td>
<td style="text-align: right;">70.80</td>
<td style="text-align: right;">97.90</td>
<td style="text-align: right;">708.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adjusted.Total.Nurse.Staffing.Hours.per.Resident.per.Day</td>
<td style="text-align: right;">570</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">3.77</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3.16</td>
<td style="text-align: right;">3.63</td>
<td style="text-align: right;">4.22</td>
<td style="text-align: right;">12.46</td>
<td style="text-align: left;">▁▇▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Staffing.Rating</td>
<td style="text-align: right;">302</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">2.60</td>
<td style="text-align: right;">1.34</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: left;">▇▆▆▆▃</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We see a spattering of missing values throughout the dataset with the majority of missing values for total staffing per resident per day. However for a dataset of over 15,000 it is mostly complete. We will leave in the missing values until we select which variables we will incorporate into our model.</p>
<p>Next, we need to explore the quality metric data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Observe Variable Names</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(raw_quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "address_line_1"               "city"                        
 [3] "cms_certification_number_ccn" "cms_region"                  
 [5] "COMP_PERF"                    "county_name"                 
 [7] "end_date"                     "facility_name"               
 [9] "HAI_039_Denominator"          "HAI_039_Obs_Rate"            
[11] "HAI_039_Observed"             "HAI_039_RS_Rate"             
[13] "HAI_039_RS_Rate_2_5...18"     "HAI_039_RS_Rate_2_5...19"    
[15] "location1"                    "measure_date_range"          
[17] "phone_number"                 "start_date"                  
[19] "state"                        "zip_code"                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(raw_quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">raw_quality</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">15107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">logical</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 33%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">cms_certification_number_ccn</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15107</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">facility_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">14889</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">address_line_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15073</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">city</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5196</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">county_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1696</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">phone_number</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15044</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">start_date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">end_date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">location1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15094</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">COMP_PERF</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: left;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">measure_date_range</td>
<td style="text-align: right;">15107</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">:</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 21%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">zip_code</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">50331.30</td>
<td style="text-align: right;">26835.24</td>
<td style="text-align: right;">660.00</td>
<td style="text-align: right;">29847.00</td>
<td style="text-align: right;">48723.00</td>
<td style="text-align: right;">72942.50</td>
<td style="text-align: right;">99929.00</td>
<td style="text-align: left;">▆▇▇▇▅</td>
</tr>
<tr class="even">
<td style="text-align: left;">cms_region</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5.19</td>
<td style="text-align: right;">2.25</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;">▃▆▇▃▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAI_039_Observed</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.24</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">97.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAI_039_Obs_Rate</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.91</td>
<td style="text-align: right;">4.97</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">4.39</td>
<td style="text-align: right;">7.17</td>
<td style="text-align: right;">10.53</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAI_039_RS_Rate</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.70</td>
<td style="text-align: right;">1.82</td>
<td style="text-align: right;">3.12</td>
<td style="text-align: right;">6.41</td>
<td style="text-align: right;">7.43</td>
<td style="text-align: right;">8.72</td>
<td style="text-align: right;">21.66</td>
<td style="text-align: left;">▅▇▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAI_039_RS_Rate_2_5…18</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">4.63</td>
<td style="text-align: right;">1.37</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">3.63</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">5.33</td>
<td style="text-align: right;">14.47</td>
<td style="text-align: left;">▇▇▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAI_039_RS_Rate_2_5…19</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">12.59</td>
<td style="text-align: right;">2.61</td>
<td style="text-align: right;">5.05</td>
<td style="text-align: right;">10.83</td>
<td style="text-align: right;">12.38</td>
<td style="text-align: right;">14.12</td>
<td style="text-align: right;">30.63</td>
<td style="text-align: left;">▂▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAI_039_Denominator</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">82.51</td>
<td style="text-align: right;">83.90</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">30.00</td>
<td style="text-align: right;">58.00</td>
<td style="text-align: right;">107.00</td>
<td style="text-align: right;">1129.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We know from our data gathering phase that nursing homes that didn’t have enough eligible residents for measure calculation would not have a HAI measure calculated. We see 3,209 of those cases are missing here. We will exclude them from our analysis. Also, we can get rid of the unnecessary variables too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>raw_quality1 <span class="ot">&lt;-</span> raw_quality <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (cms_certification_number_ccn, state, HAI_039_Observed, HAI_039_Obs_Rate, HAI_039_Denominator, HAI_039_RS_Rate) </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(raw_quality1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">raw_quality1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">15107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 33%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">cms_certification_number_ccn</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">15107</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 21%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HAI_039_Observed</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.24</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">97.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAI_039_Obs_Rate</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.91</td>
<td style="text-align: right;">4.97</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">4.39</td>
<td style="text-align: right;">7.17</td>
<td style="text-align: right;">10.53</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HAI_039_Denominator</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">82.51</td>
<td style="text-align: right;">83.90</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">30.00</td>
<td style="text-align: right;">58.00</td>
<td style="text-align: right;">107.00</td>
<td style="text-align: right;">1129.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">HAI_039_RS_Rate</td>
<td style="text-align: right;">3209</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">7.70</td>
<td style="text-align: right;">1.82</td>
<td style="text-align: right;">3.12</td>
<td style="text-align: right;">6.41</td>
<td style="text-align: right;">7.43</td>
<td style="text-align: right;">8.72</td>
<td style="text-align: right;">21.66</td>
<td style="text-align: left;">▅▇▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now we have no more missing in the quality metrics!</p>
<p>Finally, we need to merge these datasets together. The common identifer variable is the CCN. But we will need to rename the variable from the provider table first. Then, get rid of the nursing homes with no HAI quality measures.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>raw_provider2 <span class="ot">&lt;-</span> raw_provider1 <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">cms_certification_number_ccn=</span><span class="st">"Federal.Provider.Number"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>raw_combined <span class="ot">&lt;-</span> <span class="fu">merge</span>(raw_provider2, raw_quality1, <span class="at">by =</span> <span class="st">"cms_certification_number_ccn"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>raw_combined2 <span class="ot">&lt;-</span> raw_combined <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(HAI_039_Observed))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All done, data is clean now.</p>
<p>Let’s assign at the end to some final variable, this makes it easier to add further cleaning steps above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>processeddata <span class="ot">&lt;-</span> raw_combined2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-data" class="level1">
<h1>Save data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>save_data_location <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed_data"</span>,<span class="st">"processeddata.rds"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(processeddata, <span class="at">file =</span> save_data_location)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>